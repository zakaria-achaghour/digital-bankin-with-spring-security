{"ast":null,"code":"import { catchError, map, throwError } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/customer.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\n\nfunction CustomersComponent_ng_container_1_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"form\", 9);\n    i0.ɵɵlistener(\"ngSubmit\", function CustomersComponent_ng_container_1_div_5_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.handleSearchCustomers();\n    });\n    i0.ɵɵelementStart(2, \"div\", 10)(3, \"label\", 11);\n    i0.ɵɵtext(4, \"Keyword :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 12);\n    i0.ɵɵelementStart(6, \"button\", 13);\n    i0.ɵɵelement(7, \"i\", 14);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r4.searchFormGroup);\n  }\n}\n\nfunction CustomersComponent_ng_container_1_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_ng_container_1_tr_16_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const c_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.handleDeleteCustomer(c_r8);\n    });\n    i0.ɵɵelement(9, \"i\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"td\")(11, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function CustomersComponent_ng_container_1_tr_16_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const c_r8 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.handleCustomerAccounts(c_r8);\n    });\n    i0.ɵɵtext(12, \" Accounts \");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const c_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r8.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r8.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r8.email);\n  }\n}\n\nfunction CustomersComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 3)(2, \"div\", 4);\n    i0.ɵɵtext(3, \"Customers\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 5);\n    i0.ɵɵtemplate(5, CustomersComponent_ng_container_1_div_5_Template, 8, 1, \"div\", 6);\n    i0.ɵɵelementStart(6, \"table\", 7)(7, \"thead\")(8, \"tr\")(9, \"th\");\n    i0.ɵɵtext(10, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Email\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tbody\");\n    i0.ɵɵtemplate(16, CustomersComponent_ng_container_1_tr_16_Template, 13, 3, \"tr\", 8);\n    i0.ɵɵpipe(17, \"async\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.searchFormGroup);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(17, 2, ctx_r0.customers));\n  }\n}\n\nfunction CustomersComponent_ng_template_3_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.errorMessage, \" \");\n  }\n}\n\nfunction CustomersComponent_ng_template_3_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Loading ..... \");\n  }\n}\n\nfunction CustomersComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, CustomersComponent_ng_template_3_ng_container_0_Template, 3, 1, \"ng-container\", 1);\n    i0.ɵɵtemplate(1, CustomersComponent_ng_template_3_ng_template_1_Template, 1, 0, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\n  }\n\n  if (rf & 2) {\n    const _r13 = i0.ɵɵreference(2);\n\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.errorMessage)(\"ngIfElse\", _r13);\n  }\n}\n\nexport class CustomersComponent {\n  constructor(customerService, fb, router) {\n    this.customerService = customerService;\n    this.fb = fb;\n    this.router = router;\n  }\n\n  ngOnInit() {\n    this.searchFormGroup = this.fb.group({\n      keyword: this.fb.control(\"\")\n    });\n    this.handleSearchCustomers();\n  }\n\n  handleSearchCustomers() {\n    var _a;\n\n    let kw = (_a = this.searchFormGroup) === null || _a === void 0 ? void 0 : _a.value.keyword;\n    this.customers = this.customerService.searchCustomers(kw).pipe(catchError(err => {\n      this.errorMessage = err.message;\n      return throwError(err);\n    }));\n  }\n\n  handleDeleteCustomer(c) {\n    let conf = confirm(\"Are you sure?\");\n    if (!conf) return;\n    this.customerService.deleteCustomer(c.id).subscribe({\n      next: resp => {\n        this.customers = this.customers.pipe(map(data => {\n          let index = data.indexOf(c);\n          data.slice(index, 1);\n          return data;\n        }));\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n  }\n\n  handleCustomerAccounts(customer) {\n    this.router.navigateByUrl(\"/customer-accounts/\" + customer.id, {\n      state: customer\n    });\n  }\n\n}\n\nCustomersComponent.ɵfac = function CustomersComponent_Factory(t) {\n  return new (t || CustomersComponent)(i0.ɵɵdirectiveInject(i1.CustomerService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Router));\n};\n\nCustomersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CustomersComponent,\n  selectors: [[\"app-customers\"]],\n  decls: 5,\n  vars: 4,\n  consts: [[1, \"container\", \"mt-2\"], [4, \"ngIf\", \"ngIfElse\"], [\"failureOrLading\", \"\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [4, \"ngIf\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"input-group\"], [1, \"input-group-text\"], [\"type\", \"text\", \"formControlName\", \"keyword\", 1, \"form-control\"], [1, \"btn\", \"btn-info\"], [1, \"bi\", \"bi-search\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"bi\", \"bi-trash\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [\"loading\", \"\"], [1, \"text-danger\"]],\n  template: function CustomersComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, CustomersComponent_ng_container_1_Template, 18, 4, \"ng-container\", 1);\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵtemplate(3, CustomersComponent_ng_template_3_Template, 3, 2, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(4);\n\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx.customers))(\"ngIfElse\", _r1);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjdXN0b21lcnMuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"sources":["C:/Users/User/Desktop/enset/Cours Enset/Architecture JEE et Middlewares/11 Final Exam/digital-banking-angular-front/src/app/customers/customers.component.ts"],"names":["catchError","map","throwError","i0","i1","i2","i3","CustomersComponent_ng_container_1_div_5_Template","rf","ctx","_r7","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","CustomersComponent_ng_container_1_div_5_Template_form_ngSubmit_1_listener","ɵɵrestoreView","ctx_r6","ɵɵnextContext","handleSearchCustomers","ɵɵtext","ɵɵelementEnd","ɵɵelement","ctx_r4","ɵɵadvance","ɵɵproperty","searchFormGroup","CustomersComponent_ng_container_1_tr_16_Template","_r10","CustomersComponent_ng_container_1_tr_16_Template_button_click_8_listener","restoredCtx","c_r8","$implicit","ctx_r9","handleDeleteCustomer","CustomersComponent_ng_container_1_tr_16_Template_button_click_11_listener","ctx_r11","handleCustomerAccounts","ɵɵtextInterpolate","id","name","email","CustomersComponent_ng_container_1_Template","ɵɵelementContainerStart","ɵɵtemplate","ɵɵpipe","ɵɵelementContainerEnd","ctx_r0","ɵɵpipeBind1","customers","CustomersComponent_ng_template_3_ng_container_0_Template","ctx_r12","ɵɵtextInterpolate1","errorMessage","CustomersComponent_ng_template_3_ng_template_1_Template","CustomersComponent_ng_template_3_Template","ɵɵtemplateRefExtractor","_r13","ɵɵreference","ctx_r2","CustomersComponent","constructor","customerService","fb","router","ngOnInit","group","keyword","control","_a","kw","value","searchCustomers","pipe","err","message","c","conf","confirm","deleteCustomer","subscribe","next","resp","data","index","indexOf","slice","error","console","log","customer","navigateByUrl","state","ɵfac","CustomersComponent_Factory","t","ɵɵdirectiveInject","CustomerService","FormBuilder","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","CustomersComponent_Template","_r1","styles"],"mappings":"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","sourcesContent":["import { catchError, map, throwError } from \"rxjs\";\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../services/customer.service\";\r\nimport * as i2 from \"@angular/forms\";\r\nimport * as i3 from \"@angular/router\";\r\nfunction CustomersComponent_ng_container_1_div_5_Template(rf, ctx) { if (rf & 1) {\r\n    const _r7 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\")(1, \"form\", 9);\r\n    i0.ɵɵlistener(\"ngSubmit\", function CustomersComponent_ng_container_1_div_5_Template_form_ngSubmit_1_listener() { i0.ɵɵrestoreView(_r7); const ctx_r6 = i0.ɵɵnextContext(2); return ctx_r6.handleSearchCustomers(); });\r\n    i0.ɵɵelementStart(2, \"div\", 10)(3, \"label\", 11);\r\n    i0.ɵɵtext(4, \"Keyword :\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(5, \"input\", 12);\r\n    i0.ɵɵelementStart(6, \"button\", 13);\r\n    i0.ɵɵelement(7, \"i\", 14);\r\n    i0.ɵɵelementEnd()()()();\r\n} if (rf & 2) {\r\n    const ctx_r4 = i0.ɵɵnextContext(2);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"formGroup\", ctx_r4.searchFormGroup);\r\n} }\r\nfunction CustomersComponent_ng_container_1_tr_16_Template(rf, ctx) { if (rf & 1) {\r\n    const _r10 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(3, \"td\");\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(5, \"td\");\r\n    i0.ɵɵtext(6);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 15);\r\n    i0.ɵɵlistener(\"click\", function CustomersComponent_ng_container_1_tr_16_Template_button_click_8_listener() { const restoredCtx = i0.ɵɵrestoreView(_r10); const c_r8 = restoredCtx.$implicit; const ctx_r9 = i0.ɵɵnextContext(2); return ctx_r9.handleDeleteCustomer(c_r8); });\r\n    i0.ɵɵelement(9, \"i\", 16);\r\n    i0.ɵɵelementEnd()();\r\n    i0.ɵɵelementStart(10, \"td\")(11, \"button\", 17);\r\n    i0.ɵɵlistener(\"click\", function CustomersComponent_ng_container_1_tr_16_Template_button_click_11_listener() { const restoredCtx = i0.ɵɵrestoreView(_r10); const c_r8 = restoredCtx.$implicit; const ctx_r11 = i0.ɵɵnextContext(2); return ctx_r11.handleCustomerAccounts(c_r8); });\r\n    i0.ɵɵtext(12, \" Accounts \");\r\n    i0.ɵɵelementEnd()()();\r\n} if (rf & 2) {\r\n    const c_r8 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(c_r8.id);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(c_r8.name);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(c_r8.email);\r\n} }\r\nfunction CustomersComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementContainerStart(0);\r\n    i0.ɵɵelementStart(1, \"div\", 3)(2, \"div\", 4);\r\n    i0.ɵɵtext(3, \"Customers\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(4, \"div\", 5);\r\n    i0.ɵɵtemplate(5, CustomersComponent_ng_container_1_div_5_Template, 8, 1, \"div\", 6);\r\n    i0.ɵɵelementStart(6, \"table\", 7)(7, \"thead\")(8, \"tr\")(9, \"th\");\r\n    i0.ɵɵtext(10, \"ID\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(11, \"th\");\r\n    i0.ɵɵtext(12, \"Name\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(13, \"th\");\r\n    i0.ɵɵtext(14, \"Email\");\r\n    i0.ɵɵelementEnd()()();\r\n    i0.ɵɵelementStart(15, \"tbody\");\r\n    i0.ɵɵtemplate(16, CustomersComponent_ng_container_1_tr_16_Template, 13, 3, \"tr\", 8);\r\n    i0.ɵɵpipe(17, \"async\");\r\n    i0.ɵɵelementEnd()()()();\r\n    i0.ɵɵelementContainerEnd();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.searchFormGroup);\r\n    i0.ɵɵadvance(11);\r\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(17, 2, ctx_r0.customers));\r\n} }\r\nfunction CustomersComponent_ng_template_3_ng_container_0_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementContainerStart(0);\r\n    i0.ɵɵelementStart(1, \"div\", 19);\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementContainerEnd();\r\n} if (rf & 2) {\r\n    const ctx_r12 = i0.ɵɵnextContext(2);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.errorMessage, \" \");\r\n} }\r\nfunction CustomersComponent_ng_template_3_ng_template_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵtext(0, \" Loading ..... \");\r\n} }\r\nfunction CustomersComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵtemplate(0, CustomersComponent_ng_template_3_ng_container_0_Template, 3, 1, \"ng-container\", 1);\r\n    i0.ɵɵtemplate(1, CustomersComponent_ng_template_3_ng_template_1_Template, 1, 0, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\r\n} if (rf & 2) {\r\n    const _r13 = i0.ɵɵreference(2);\r\n    const ctx_r2 = i0.ɵɵnextContext();\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.errorMessage)(\"ngIfElse\", _r13);\r\n} }\r\nexport class CustomersComponent {\r\n    constructor(customerService, fb, router) {\r\n        this.customerService = customerService;\r\n        this.fb = fb;\r\n        this.router = router;\r\n    }\r\n    ngOnInit() {\r\n        this.searchFormGroup = this.fb.group({\r\n            keyword: this.fb.control(\"\")\r\n        });\r\n        this.handleSearchCustomers();\r\n    }\r\n    handleSearchCustomers() {\r\n        var _a;\r\n        let kw = (_a = this.searchFormGroup) === null || _a === void 0 ? void 0 : _a.value.keyword;\r\n        this.customers = this.customerService.searchCustomers(kw).pipe(catchError(err => {\r\n            this.errorMessage = err.message;\r\n            return throwError(err);\r\n        }));\r\n    }\r\n    handleDeleteCustomer(c) {\r\n        let conf = confirm(\"Are you sure?\");\r\n        if (!conf)\r\n            return;\r\n        this.customerService.deleteCustomer(c.id).subscribe({\r\n            next: (resp) => {\r\n                this.customers = this.customers.pipe(map(data => {\r\n                    let index = data.indexOf(c);\r\n                    data.slice(index, 1);\r\n                    return data;\r\n                }));\r\n            },\r\n            error: err => {\r\n                console.log(err);\r\n            }\r\n        });\r\n    }\r\n    handleCustomerAccounts(customer) {\r\n        this.router.navigateByUrl(\"/customer-accounts/\" + customer.id, { state: customer });\r\n    }\r\n}\r\nCustomersComponent.ɵfac = function CustomersComponent_Factory(t) { return new (t || CustomersComponent)(i0.ɵɵdirectiveInject(i1.CustomerService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Router)); };\r\nCustomersComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CustomersComponent, selectors: [[\"app-customers\"]], decls: 5, vars: 4, consts: [[1, \"container\", \"mt-2\"], [4, \"ngIf\", \"ngIfElse\"], [\"failureOrLading\", \"\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [4, \"ngIf\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"input-group\"], [1, \"input-group-text\"], [\"type\", \"text\", \"formControlName\", \"keyword\", 1, \"form-control\"], [1, \"btn\", \"btn-info\"], [1, \"bi\", \"bi-search\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"bi\", \"bi-trash\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [\"loading\", \"\"], [1, \"text-danger\"]], template: function CustomersComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵtemplate(1, CustomersComponent_ng_container_1_Template, 18, 4, \"ng-container\", 1);\r\n        i0.ɵɵpipe(2, \"async\");\r\n        i0.ɵɵtemplate(3, CustomersComponent_ng_template_3_Template, 3, 2, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        const _r1 = i0.ɵɵreference(4);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx.customers))(\"ngIfElse\", _r1);\r\n    } }, styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjdXN0b21lcnMuY29tcG9uZW50LmNzcyJ9 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}